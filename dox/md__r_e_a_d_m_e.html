<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>libmsr: LIBMSR</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">libmsr
   &#160;<span id="projectnumber">0.3.0</span>
   </div>
   <div id="projectbrief">A friendlier interface to accessing MSRs on Intel platforms</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">LIBMSR </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Welcome to Libmsr, a friendly (well, friendlier) interface to many of the model-specific registers in Intel processors. Now with PCI configuration register support for some Intel hardware.</p>
<p>version 0.3.0</p>
<h2>Last Update</h2>
<p>24 August 2016</p>
<h2>Webpages</h2>
<p><a href="http://software.llnl.gov/libmsr">http://software.llnl.gov/libmsr</a> <br/>
 <a href="https://github.com/llnl/libmsr">https://github.com/llnl/libmsr</a></p>
<h2>Overview</h2>
<p>Libmsr provides an interface to accessing the model-specific registers (MSRs) on Intel platforms, which provide privileged functionality for monitoring and controlling various CPU features.</p>
<h2>Installation</h2>
<p>Installation is simple. You will need <a href="http://www.cmake.org">cmake</a> version 2.8 or higher and GCC. The old installation method is deprecated, you MUST use the script. In most cases, the installation is as follows: </p>
<pre class="fragment">install.sh [ /path/to/install ] [ -f arch_model ]
</pre><p>The install script can take two (optional) arguments. The first argument is the install directory. If a null or empty string is specified, then a BUILD/ directory is automatically created in the top-level directory (i.e, where install.sh is launched from).</p>
<p>The second argument can explicitly tell the auto-configuration tool to use the header file of a specific architecture. To do this, simply add the following flag when executing the install script: "-f[architecture number]", where the architecture number is in hexadecimal.</p>
<p>Example:</p>
<p>I have an Ivy Bridge client processor which the auto-configuration tool does not detect. So, I will force the auto-configuration tool to use the Ivy Bridge header file defined in platform_headers/. </p>
<pre class="fragment">install.sh ~/build/libmsr -f3E
</pre><p>Currently supported architectures are Intel Xeon v1-3 (Sandy Bridge, Ivy Bridge, and Haswell server processors). The library technically supports all processors based on these architectures, but some features may be missing from client products. Using the wrong header file is likely to cause problems.</p>
<p>Supported Architectures: </p>
<pre class="fragment">2D (Sandy Bridge)
3E (Ivy Bridge)
3F (Haswell)
</pre><p>If you are unsure of your architecture number, check the "model" field in <code>lscpu</code> or <code>/proc/cpuinfo</code> (note that it won't be in hexadecimal).</p>
<h2>Notes</h2>
<p>This software depends on the files <code>/dev/cpu/*/msr</code> being present with R/W permissions. Recent kernels require additional capabilities. We have found it easier to use our own <a href="https://github.com/LLNL/msr-safe">MSR-SAFE</a> kernel module, but running as root (or going through the bother of adding the capabilities to the binaries) is another option.</p>
<p>If you need PCI configuration register (CSR) support in Libmsr, you MUST have CSR-SAFE installed. This code is not currently on Github &ndash; you will need to request it.</p>
<p>Call <code>msr_init()</code> before using any of the APIs.</p>
<p>For sample code, see libmsr_test.c in the test/ directory.</p>
<p>Our most up-to-date documentation for Libmsr use is generated as part of the install script using Doxygen. There are also some useful PDF files in the documentation/ directory.</p>
<p>If you wish to use Libmsr on LLNL's Cab system, you will need to apply a patch in order to gain MSR access. At this time, the patch will need to be requested as it is not on Github.</p>
<h2>Contributing</h2>
<p>Code formatting can be automated using astyle with the following parameters: </p>
<pre class="fragment">astyle --style=allman --indent=spaces=4 -y -S -C -N &lt;src_file&gt;
</pre><h2>Contact</h2>
<p>Barry Rountree, Project Lead, <a href="#" onclick="location.href='mai'+'lto:'+'rou'+'nt'+'ree'+'@l'+'lnl'+'.g'+'ov'; return false;">rount<span style="display: none;">.nosp@m.</span>ree@<span style="display: none;">.nosp@m.</span>llnl.<span style="display: none;">.nosp@m.</span>gov</a> <br/>
 Kathleen Shoga, Developer, <a href="#" onclick="location.href='mai'+'lto:'+'sho'+'ga'+'1@l'+'ln'+'l.g'+'ov'; return false;">shoga<span style="display: none;">.nosp@m.</span>1@ll<span style="display: none;">.nosp@m.</span>nl.go<span style="display: none;">.nosp@m.</span>v</a> <br/>
 Scott Walker, Developer, <a href="#" onclick="location.href='mai'+'lto:'+'wal'+'ke'+'r91'+'@l'+'lnl'+'.g'+'ov'; return false;">walke<span style="display: none;">.nosp@m.</span>r91@<span style="display: none;">.nosp@m.</span>llnl.<span style="display: none;">.nosp@m.</span>gov</a> <br/>
 Lauren Morita, Developer, <a href="#" onclick="location.href='mai'+'lto:'+'mor'+'it'+'a4@'+'ll'+'nl.'+'go'+'v'; return false;">morit<span style="display: none;">.nosp@m.</span>a4@l<span style="display: none;">.nosp@m.</span>lnl.g<span style="display: none;">.nosp@m.</span>ov</a> <br/>
 Stephanie Labasan, Developer, <a href="#" onclick="location.href='mai'+'lto:'+'lab'+'as'+'an1'+'@l'+'lnl'+'.g'+'ov'; return false;">labas<span style="display: none;">.nosp@m.</span>an1@<span style="display: none;">.nosp@m.</span>llnl.<span style="display: none;">.nosp@m.</span>gov</a></p>
<p>Please feel free to contact the developers with any questions or feature requests. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
